<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MyStoryTeller.io - Magical Stories for Kids</title>
    <style>
        body { font-family: 'Comic Sans MS', sans-serif; text-align: center; background: #f0f8ff; padding: 50px; }
        .login-card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: inline-block; }
        .btn { display: block; width: 200px; padding: 10px; margin: 10px auto; border-radius: 5px; text-decoration: none; color: white; font-weight: bold; }
        
        /* Interactive Buttons */
        .auth-buttons { margin: 25px 0; }
        .btn-social { 
            display: inline-block; 
            padding: 18px 35px; 
            margin: 10px; 
            border-radius: 50px; 
            text-decoration: none; 
            color: white; 
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            font-size: 1.2rem; 
            font-weight: 600;
            box-shadow: 0 8px 0px rgba(0,0,0,0.1);
        }
        .btn-social:hover { transform: scale(1.1) translateY(-5px); box-shadow: 0 15px 20px rgba(0,0,0,0.1); }
        .google { background: #df0b1d; }
        .github { background: #333; }
        .facebook { background: #054eec; }
    </style>
</head>
<body>
    <div class="login-card">
        <h1>Welcome to MyStoryTeller.io</h1>
        <p>Login to create a special story for your child!</p>

        <h2>Login to MyStoryTeller</h2>
    
    <form id="loginForm">
        <input type="text" id="username" placeholder="Email" required>
        <input type="password" id="password" placeholder="Password" required>
        <button type="submit">Login</button>
    </form>

    <hr>
    <div class="auth-buttons">
        <a href="https://your-ec2-api.com/oauth2/authorization/google" class="btn-social google">ðŸŒŸ Parents: Log in with Google</a>
        <a href="https://your-ec2-api.com/oauth2/authorization/google" class="btn-social github">ðŸŒŸ Parents: Log in with Github</a>
        <a href="https://your-ec2-api.com/oauth2/authorization/google" class="btn-social facebook">ðŸŒŸ Parents: Log in with Facebook</a>
    </div>
        
       
    </div>

    <script>
    // 1. Handle Form Login
    document.getElementById('loginForm').onsubmit = async (e) => {
        e.preventDefault();
        const response = await fetch('https://your-ec2-api.com/api/auth/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                username: e.target.username.value,
                password: e.target.password.value
            })
        });
        const data = await response.json();
        if (data.token) {
            localStorage.setItem('jwt_token', data.token);
            window.location.href = "/dashboard.html";
        }
    };

    // 2. Handle OAuth Redirect (URL Param)
    const token = new URLSearchParams(window.location.search).get('token');
    if (token) {
        localStorage.setItem('jwt_token', token);
        window.history.replaceState({}, document.title, "/"); // Clean URL
        window.location.href = "/dashboard.html";
    }
    </script>
</body>
</html>
